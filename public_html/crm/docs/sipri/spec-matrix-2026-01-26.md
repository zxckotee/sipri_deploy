# Матрица требований ТЗ «СИПРИ версия 29.12.25.pptx» → реализация (CI4)

Источник требований: текстовая выгрузка PPTX (слайды `ppt/slides/slide1..39.xml`).

Легенда:
- **done** — реализовано и доступно пользователю
- **partial** — частично/черновик/без ключевых ограничений
- **missing** — отсутствует

## 1) Главная/вход/авторизация (слайды 1–2, 28, 39)
- **Поиск предприятия/компании на входе**: missing
  - **Нужно**: UX «поиск предприятия» до логина (в ТЗ на главной)
  - **Файлы**: нет SIPRI-логики на `Signin`/публичных страницах
- **Вход/авторизация и личный кабинет**: partial
  - **Есть**: SIPRI модуль в CRM, доступ через роли/права (`can_access_sipri`, `SipriBaseController`)
  - **Файлы**: `app/Controllers/SipriBaseController.php`, `app/Config/Routes.php`
- **Регистрация новых участников (смежные/клиенты)**: missing
  - **Нужно**: отдельный флоу регистрации/ограничений

## 2) Правила участия / инструкции (слайды 3–4)
- **Правила участия (свой/смежные/клиенты) + шаблоны + видео-инструкция**: missing

## 3) Идеи «Проблема–Предложение» (слайды 5–18, 34–39)
- **Создать идею, карточка (проблема/идея/как выполнить/ресурсы)**: done
  - `SipriIdeas::save`, вьюхи списка/карточки
  - **Файлы**: `app/Controllers/SipriIdeas.php`, `app/Views/sipri/ideas/*`
- **Категории источника: своё предприятие / клиенты / смежные**: partial
  - **Есть**: поле `category` и фильтрация по tenant
  - **Нет**: отдельные карточки для клиентов (контакты/телефон/организация) как в ТЗ (слайд 10)
  - **Файлы**: `app/Controllers/SipriIdeas.php`, `app/Database/Migrations/2026-01-26-000001_CreateSipriCoreTables.php`
- **Голосование (за/против/воздержался) и рейтинг 0–100%**: done
  - **Файлы**: `app/Controllers/SipriIdeas.php` (расчёт `rating_percent`)
- **Поделиться с коллегами / отправить коллегам/отделу**: missing
- **Соавтор**: missing
- **Обсуждение/комментарии**: partial
  - **Есть**: комментарии по идее
  - **Нет**: выделение «обсуждение через мессенджер/почту/звонки» как ссылки/интеграции
  - **Файлы**: `app/Controllers/SipriIdeas.php`, `app/Views/sipri/ideas/view.php`
- **Поиск и анти-дубликат**: partial
  - **Есть**: поиск по тексту в списке, `suggest` по заголовкам
  - **Нет**: явная проверка/подсказки дубликатов при создании
  - **Файлы**: `app/Controllers/SipriIdeas.php`, `app/Models/Sipri_ideas_model.php`
- **Согласование “по вертикали до директора”, цепочка и статусы**: partial
  - **Есть**: ручная отправка на согласование конкретному пользователю + approve/reject
  - **Нет**: орг-иерархии (рук отдела/директор), автоматического маршрута, делегирования
  - **Файлы**: `app/Controllers/SipriIdeas.php`, `app/Controllers/SipriApprovals.php`, `app/Database/Migrations/2026-01-26-000001_CreateSipriCoreTables.php`
- **Исполнение: назначение исполнителя, отчёт, успешно/неуспешно, архив**: missing
  - **Есть только**: поля статуса на уровне схемы
- **Секретность “гриф секретно”**: partial
  - **Есть**: `is_secret` + право `sipri_secret_access`
  - **Нет**: “замок директора всем/снятие по выбору”, “секретно в любой момент”
  - **Файлы**: `app/Controllers/SipriIdeas.php`, `app/Controllers/SipriBaseController.php`
- **Бан за флуд на время**: missing
  - **Есть**: таблица `sipri_idea_access_locks` используется как допуск к секретной карточке, не как ban
  - **Файлы**: `app/Models/Sipri_idea_access_locks_model.php`
- **Бонусный счёт автора и рейтинг автора по всем идеям**: missing

## 4) База предложений (списки по статусам/адресатам) (слайды 11, 14, 17, 35–38)
- **Списки “обсуждаемые/согласованные/в работе/архив”**: partial
  - **Есть**: статус в таблице и вывод в списке
  - **Нет**: отдельные вкладки/фильтры по адресатам (мой отдел/смежные/клиенты/с коллегами)

## 5) Библиотека знаний (слайды 19–23)
- **Разделы: нормативные документы / документы предприятия / ресурсы/новости / сайт предприятия**: partial
  - **Есть**: Knowledge base как категории/статьи, SIPRI-ACL по tenant/department (черновик)
  - **Нет**: преднастроенные разделы и типы контента (ссылки на внешний сайт/консультант и т.п.)
  - **Файлы**: `app/Controllers/SipriDocuments.php`, `app/Models/Help_categories_model.php`

## 6) Мессенджер/почта (слайды 24–27)
- **Встроенный мессенджер/почта или ссылки на внешние**: missing
  - В ТЗ допускается сделать вкладки как ссылки на типовой мессенджер («Мах») и домен почты

## 7) Профиль/контакты/настройки/помощь (слайды 28–33)
- **Профиль (телефон, ДР, фото, предприятие, отдел, служ/личная почта)**: partial
  - **Есть**: служ/личная почта, предприятие/отдел, должность, ник, анонимный режим, обязательность заполнения для SIPRI
  - **Нет**: телефон, дата рождения, логин/пароль UX как в ТЗ
  - **Файлы**: `app/Controllers/SipriProfile.php`, `app/Views/sipri/profile/index.php`
- **Контакты: моё предприятие / смежные / клиенты**: partial
  - **Есть**: вкладки и базовые списки
  - **Нет**: структура отделов смежных предприятий без персональных данных
  - **Файлы**: `app/Controllers/SipriContacts.php`, `app/Views/sipri/contacts/index.php`
- **Настройки (уведомления/звуки/язык/оформление/шрифт)**: missing
- **Помощь/техподдержка: вопрос + история обращений**: missing

## 8) Интеграция (слайд 39)
- **Кнопка-ссылка для сайтов предприятий (в т.ч. Bitrix), интранет/интернет**: missing
- **SSO/интеграция с СЭД («Практика» и др.)**: missing


